# Система управления персоналом детского лагеря

## Описание

Веб-приложение для управления персоналом детского лагеря с мобильной оптимизацией. Система позволяет администраторам управлять сменами и сотрудниками, а сотрудникам - регистрироваться и просматривать свою информацию.

## Основные возможности

### Для администраторов:
- Управление сменами (создание, редактирование, удаление)
- Управление сотрудниками (создание, просмотр, редактирование, удаление)
- Генерация уникальных ссылок для регистрации сотрудников
- Просмотр статистики по сменам и сотрудникам
- Фильтрация и поиск сотрудников

### Для сотрудников:
- Регистрация по уникальной ссылке от администратора
- Самостоятельная регистрация через форму
- Личный кабинет с информацией о смене
- Загрузка аватара
- Заполнение личных данных, паспортных данных и банковских реквизитов

## Технические требования

- PHP >= 8.1
- Composer
- Node.js & NPM
- SQLite (или другая база данных)

## Установка

1. Клонируйте репозиторий
```bash
git clone <repository-url>
cd camp-staff-manager
```

2. Установите зависимости PHP
```bash
composer install
```

3. Установите зависимости JavaScript
```bash
npm install
```

4. Скопируйте файл окружения
```bash
cp .env.example .env
```

5. Сгенерируйте ключ приложения
```bash
php artisan key:generate
```

6. Выполните миграции базы данных
```bash
php artisan migrate
```

7. Создайте символическую ссылку для хранилища
```bash
php artisan storage:link
```

8. Соберите фронтенд-ресурсы
```bash
npm run build
```

## Запуск

Для разработки:
```bash
php artisan serve
npm run dev
```

## Тестовые данные

### Администратор:
- Email: admin@camp.com
- Пароль: password

## Маршруты

### Публичные:
- `/` - Главная страница
- `/unified-login` - Единая страница входа для администраторов и сотрудников
- `/staff/join` - Самостоятельная регистрация сотрудников
- `/staff/register/{token}` - Регистрация по ссылке от администратора

### Администратор:
- `/admin` - Панель администратора
- `/admin/staff` - Управление сотрудниками
- `/admin/shifts` - Управление сменами

### Сотрудники:
- `/staff/dashboard` - Личный кабинет сотрудника

## Структура базы данных

### Таблица `shifts`:
- id
- name - название смены
- start_date - дата начала
- end_date - дата окончания
- timestamps

### Таблица `staff`:
- id
- shift_id - связь со сменой
- avatar - фото
- password - пароль
- first_name, last_name, middle_name - ФИО
- phone - телефон
- email - электронная почта
- telegram - ник в Telegram
- position - должность
- is_self_employed - признак самозанятого
- Паспортные данные
- Банковские реквизиты
- rating - рейтинг (для администратора)
- admin_comment - комментарий администратора
- registration_token - токен для регистрации
- registered_at - время завершения регистрации
- timestamps

## Безопасность

- Аутентификация через Laravel Breeze
- Разделение прав доступа для администраторов и сотрудников
- Защита маршрутов через middleware
- Уникальные токены для регистрации сотрудников
- Хеширование паролей
